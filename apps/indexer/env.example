# ========================================
# Environment Configuration
# ========================================
NODE_ENV=development
LOG_LEVEL=info

# ========================================
# Solana Configuration
# ========================================
# Helius RPC (recommended - full WebSocket support)
SOLANA_RPC_URL=https://mainnet.helius-rpc.com/?api-key=your-helius-api-key-here
SOLANA_WSS_URL=wss://mainnet.helius-rpc.com/?api-key=your-helius-api-key-here
SOLANA_COMMITMENT=confirmed

# DLN Program ID (set per indexer instance for different Solana contracts)
DLN_PROGRAM_ID=src5qyZHqTqecJV4aY6Cb6zDZLMDzrDKKezs22MPHr4

# ========================================
# Indexer Configuration
# ========================================
# Mode: history, realtime, backfill, websocket
INDEXER_MODE=backfill
INDEXER_PORT=8080
INDEXER_BATCH_SIZE=1000
INDEXER_CONCURRENCY=10

# Target number of transactions before switching to realtime
INDEXER_TARGET_TRANSACTIONS=25000

# Time gap in hours to trigger backfill (default: 2 hours)
# If last transaction is older than this, backfill will run
INDEXER_GAP_TIME_HOURS=2

# Alternative target names (for backfill mode)
# INDEXER_TARGET_CREATED=10000
# INDEXER_TARGET_FULFILLED=5000

# Start Slot (optional, for specific start point)
# INDEXER_START_SLOT=123456789

# Retry Configuration
INDEXER_RETRY_ATTEMPTS=5
INDEXER_RETRY_DELAY=1000
INDEXER_RETRY_BACKOFF_MULTIPLIER=2
INDEXER_MAX_RETRY_DELAY=30000

# ========================================
# Redis Configuration
# ========================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ========================================
# ClickHouse Configuration
# ========================================
CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_DATABASE=dln
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=

# ========================================
# RabbitMQ Configuration
# ========================================
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_QUEUE_NAME=dln_transactions
# Note: Exchange name is automatically generated as "{QUEUE_NAME}.exchange"
RABBITMQ_RETRY_DELAY=5000
RABBITMQ_MAX_RETRIES=3

# ========================================
# WebSocket Configuration (for websocket mode)
# ========================================
WS_DEDUP_TTL_SECONDS=3600
WS_MAX_RECONNECT_ATTEMPTS=10
WS_BASE_RECONNECT_DELAY_MS=1000
WS_MAX_RECONNECT_DELAY_MS=60000
WS_HEALTH_CHECK_INTERVAL_MS=30000
