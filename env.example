# ========================================
# Environment Configuration
# ========================================

# Node Environment
NODE_ENV=development
LOG_LEVEL=info

# ========================================
# Solana Configuration
# ========================================
SOLANA_RPC_URL=https://solana-mainnet.g.alchemy.com/v2/<token>

SOLANA_WSS_URL=wss://solana-mainnet.g.alchemy.com/v2/<token>
SOLANA_COMMITMENT=confirmed

# DLN Program ID (set per indexer instance for different Solana contracts)
DLN_PROGRAM_ID=
# ========================================
# ClickHouse Configuration
# ========================================
CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_DATABASE=dln
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=

# ========================================
# Redis Configuration
# ========================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ========================================
# RabbitMQ Configuration
# ========================================
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_QUEUE_NAME=dln_transactions
RABBITMQ_EXCHANGE_NAME=dln_exchange
RABBITMQ_RETRY_DELAY=5000
RABBITMQ_MAX_RETRIES=3

# ========================================
# Worker Configuration
# ========================================

# Concurrency Settings
WORKER_CONCURRENCY=10

# Batch Processing
WORKER_BATCH_SIZE=1
WORKER_BATCH_FLUSH_INTERVAL=1

# Retry Configuration
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=1000
WORKER_RETRY_BACKOFF_MULTIPLIER=2
WORKER_MAX_RETRY_DELAY=30000

# Metrics Server
WORKER_METRICS_PORT=9090

# ========================================
# Indexer Configuration
# ========================================
# Indexer Mode: history, realtime, backfill, websocket
INDEXER_PORT=8080

# Batch Settings
INDEXER_BATCH_SIZE=20
INDEXER_CONCURRENCY=10

# Target number of transactions before switching to realtime
INDEXER_TARGET_TRANSACTIONS=25000

# Time gap in hours to trigger backfill (default: 2 hours)
# If last transaction is older than this, backfill will run
INDEXER_GAP_TIME_HOURS=2

# Start Slot (optional, for specific start point)
# INDEXER_START_SLOT=123456789

# Retry Configuration
INDEXER_RETRY_ATTEMPTS=5
INDEXER_RETRY_DELAY=1000
INDEXER_RETRY_BACKOFF_MULTIPLIER=2
INDEXER_MAX_RETRY_DELAY=30000

# ========================================
# WebSocket Configuration
# ========================================
# Deduplication TTL in seconds
WS_DEDUP_TTL_SECONDS=3600

# Reconnection Settings
WS_MAX_RECONNECT_ATTEMPTS=10
WS_BASE_RECONNECT_DELAY_MS=1000
WS_MAX_RECONNECT_DELAY_MS=60000

# Health Check
WS_HEALTH_CHECK_INTERVAL_MS=30000

# ========================================
# Jupiter API Configuration
# ========================================
JUPITER_API_URL=https://api.jup.ag
JUPITER_API_KEY=<api key>
JUPITER_PRICE_ENDPOINT=/price/v3
JUPITER_TIMEOUT=5000
JUPITER_RETRY_ATTEMPTS=3
JUPITER_CACHE_TTL=60

# ========================================
# API Configuration
# ========================================
API_PORT=3000
API_HOST=localhost
API_CORS_ORIGIN=*
API_RATE_LIMIT=100

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# ========================================
# Web Dashboard Configuration
# ========================================
NUXT_PUBLIC_WEB_PORT=8080
NUXT_PUBLIC_WEB_API_URL=http://localhost:8080
