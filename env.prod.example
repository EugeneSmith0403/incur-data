# ============================================
# Production Environment Variables
# ============================================
# Copy this file to .env.prod and fill in the values
# NEVER commit .env.prod to version control

# ============================================
# Environment Configuration
# ============================================
NODE_ENV=production
LOG_LEVEL=info

# ============================================
# Docker Configuration
# ============================================
DOCKER_REGISTRY=ghcr.io
DOCKER_IMAGE_PREFIX=your-org/incur-data
IMAGE_TAG=latest

# ============================================
# Solana Configuration
# ============================================
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
SOLANA_WSS_URL=wss://api.mainnet-beta.solana.com
SOLANA_COMMITMENT=confirmed

# DLN Program ID (set per indexer instance for different Solana contracts)
DLN_PROGRAM_ID=your_program_id_here

# ============================================
# RabbitMQ Configuration
# ============================================
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=CHANGE_ME_SECURE_PASSWORD
RABBITMQ_VHOST=/
RABBITMQ_PORT=5672
RABBITMQ_MGMT_PORT=15672
RABBITMQ_URL=amqp://admin:CHANGE_ME_SECURE_PASSWORD@rabbitmq:5672/
RABBITMQ_QUEUE_NAME=dln_transactions
RABBITMQ_EXCHANGE_NAME=dln_exchange
RABBITMQ_RETRY_DELAY=5000
RABBITMQ_MAX_RETRIES=3
RABBITMQ_PREFETCH_COUNT=10
RABBITMQ_MEMORY_LIMIT=0.6

# ============================================
# Redis Configuration
# ============================================
REDIS_URL=redis://:CHANGE_ME_SECURE_PASSWORD@redis:6379
REDIS_PASSWORD=CHANGE_ME_SECURE_PASSWORD
REDIS_PORT=6379
REDIS_DB=0
REDIS_MAX_MEMORY=512mb

# ============================================
# ClickHouse Configuration
# ============================================
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000
CLICKHOUSE_DATABASE=dln
CLICKHOUSE_USER=default
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# ============================================
# API Configuration
# ============================================
API_PORT=3000
API_HOST=0.0.0.0
API_CORS_ORIGIN=https://yourdomain.com
API_RATE_LIMIT=100
CORS_ORIGIN=https://yourdomain.com
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000
API_REPLICAS=2

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# ============================================
# Web Configuration
# ============================================
WEB_PORT=3001
WEB_API_URL=https://api.yourdomain.com
NUXT_PUBLIC_API_URL=https://api.yourdomain.com
WEB_REPLICAS=2

# ============================================
# Worker Configuration
# ============================================
WORKER_ID=worker-prod-1
WORKER_CONCURRENCY=10
WORKER_REPLICAS=2
WORKER_BATCH_SIZE=100
WORKER_BATCH_FLUSH_INTERVAL=5000
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=1000
WORKER_RETRY_BACKOFF_MULTIPLIER=2
WORKER_MAX_RETRY_DELAY=30000
WORKER_METRICS_PORT=9091

# ============================================
# Indexer Configuration
# ============================================
INDEXER_MODE=realtime
INDEXER_PORT=8080
INDEXER_BATCH_SIZE=1000
INDEXER_CONCURRENCY=10
INDEXER_TARGET_ORDER_FULFILLED=25000
INDEXER_RETRY_ATTEMPTS=5
INDEXER_RETRY_DELAY=1000
INDEXER_RETRY_BACKOFF_MULTIPLIER=2
INDEXER_MAX_RETRY_DELAY=30000

# ============================================
# Jupiter API Configuration
# ============================================
JUPITER_API_URL=https://api.jup.ag
JUPITER_API_KEY=your-jupiter-api-key-here
JUPITER_PRICE_ENDPOINT=/price/v2
JUPITER_TIMEOUT=5000
JUPITER_RETRY_ATTEMPTS=3
# Cache TTL in seconds (300 = 5 minutes)
JUPITER_CACHE_TTL=300
# Rate limit: minimum delay between requests in ms (1000 = 1 RPS)
JUPITER_RATE_LIMIT=1000

# ============================================
# WebSocket Configuration
# ============================================
WS_DEDUP_TTL_SECONDS=7200
WS_MAX_RECONNECT_ATTEMPTS=20
WS_BASE_RECONNECT_DELAY_MS=1000
WS_MAX_RECONNECT_DELAY_MS=120000
WS_HEALTH_CHECK_INTERVAL_MS=15000

# ============================================
# Optional: External Services
# ============================================
# SENTRY_DSN=https://your-sentry-dsn
# DATADOG_API_KEY=your-datadog-api-key
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
