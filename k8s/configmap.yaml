apiVersion: v1
kind: ConfigMap
metadata:
  name: incur-data-config
  namespace: incur-data
data:
  # Node Environment
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # RabbitMQ Configuration
  RABBITMQ_QUEUE_NAME: "dln_transactions"
  RABBITMQ_EXCHANGE_NAME: "dln_exchange"
  RABBITMQ_RETRY_DELAY: "5000"
  RABBITMQ_MAX_RETRIES: "3"
  RABBITMQ_PREFETCH_COUNT: "10"

  # ClickHouse Configuration
  CLICKHOUSE_DATABASE: "dln"
  CLICKHOUSE_USERNAME: "default"

  # Redis Configuration
  REDIS_DB: "0"

  # Indexer Configuration
  INDEXER_PORT: "8080"
  INDEXER_BATCH_SIZE: "1000"
  INDEXER_TARGET_TRANSACTIONS: "25000"
  INDEXER_GAP_TIME_HOURS: "2"
  INDEXER_RETRY_ATTEMPTS: "5"
  INDEXER_RETRY_DELAY: "1000"
  INDEXER_RETRY_BACKOFF_MULTIPLIER: "2"
  INDEXER_MAX_RETRY_DELAY: "30000"

  # Worker Configuration
  WORKER_CONCURRENCY: "10"
  WORKER_BATCH_SIZE: "100"
  WORKER_BATCH_FLUSH_INTERVAL: "5000"
  WORKER_RETRY_ATTEMPTS: "3"
  WORKER_RETRY_DELAY: "1000"
  WORKER_RETRY_BACKOFF_MULTIPLIER: "2"
  WORKER_MAX_RETRY_DELAY: "30000"
  WORKER_METRICS_PORT: "9090"

  # Jupiter API Configuration
  JUPITER_API_URL: "https://api.jup.ag"
  JUPITER_PRICE_ENDPOINT: "/price/v3"
  JUPITER_TIMEOUT: "10000"
  JUPITER_RETRY_ATTEMPTS: "3"
  JUPITER_CACHE_TTL: "300"
  JUPITER_RATE_LIMIT: "1000"

  # Solana Configuration
  SOLANA_COMMITMENT: "confirmed"

  # API Configuration
  API_PORT: "3000"
  API_HOST: "0.0.0.0"
  API_CORS_ORIGIN: "https://your-domain.com"
  API_RATE_LIMIT: "100"
  API_AUTH_ENABLED: "true"

  # Metrics
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"

  # WebSocket Configuration
  WS_DEDUP_TTL_SECONDS: "3600"
  WS_MAX_RECONNECT_ATTEMPTS: "10"
  WS_BASE_RECONNECT_DELAY_MS: "1000"
  WS_MAX_RECONNECT_DELAY_MS: "60000"
  WS_HEALTH_CHECK_INTERVAL_MS: "30000"
